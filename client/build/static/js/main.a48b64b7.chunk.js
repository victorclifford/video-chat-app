(this["webpackJsonpvideo_chat-app"]=this["webpackJsonpvideo_chat-app"]||[]).push([[0],{120:function(e,t){},122:function(e,t){},139:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(9),i=a.n(r),l=(a(96),a(26)),s=a(84),o=a(59),d=a.n(o),j=a(4),u=Object(n.createContext)(),b=Object(s.a)("https://viper-vc.herokuapp.com/"),m=function(e){var t=e.children,a=Object(n.useState)(null),c=Object(l.a)(a,2),r=c[0],i=c[1],s=Object(n.useState)(""),o=Object(l.a)(s,2),m=o[0],p=o[1],x=Object(n.useState)({}),O=Object(l.a)(x,2),h=O[0],f=O[1],g=Object(n.useState)(!1),v=Object(l.a)(g,2),C=v[0],w=v[1],y=Object(n.useState)(!1),N=Object(l.a)(y,2),k=N[0],S=N[1],I=Object(n.useState)(""),D=Object(l.a)(I,2),B=D[0],A=D[1],E=Object(n.useRef)(),R=Object(n.useRef)(),W=Object(n.useRef)();Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){i(e),E.current.srcObject=e})),b.on("me",(function(e){return p(e)})),b.on("calluser",(function(e){var t=e.from,a=e.name,n=e.signal;f({isReceivedCall:!0,from:t,name:a,signal:n})}))}),[]);return Object(j.jsx)(u.Provider,{value:{myVideo:E,callAccepted:C,userVideo:R,stream:r,name:B,setName:A,callEnded:k,me:m,answerCall:function(){w=!0;var e=new d.a({initiator:!1,trickle:!1,stream:r});e.on("signal",(function(e){b.emit("answercall",{signal:e,to:h.from})})),e.on("stream",(function(e){R.current.srcObject=e})),e.signal(h.signal),W.current=e},callUser:function(e){var t=new d.a({initiator:!0,trickle:!1,stream:r});t.on("signal",(function(t){b.emit("calluser",{userToCall:e,signalData:t,from:m,name:B})})),t.on("stream",(function(e){R.current.srcObject=e})),b.on("callaccepted",(function(e){w(!0),t.signal(e)})),W.current=t},leaveCall:function(){S(!0),W.current.destroy(),window.location.reload()}},children:t})},p=a(28),x=a(179),O=a(174),h=a(169),f=a(172),g=a(140),v=Object(h.a)((function(e){return{video:Object(p.a)({width:"550px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(p.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{padding:"10px",border:"2px solid black",margin:"10px"}}})),C=function(){var e=Object(n.useContext)(u),t=e.name,a=e.callAccepted,c=e.myvideo,r=e.userVideo,i=e.callEnded,l=e.stream,s=e.call,o=v();return Object(j.jsxs)(f.a,{container:!0,className:o.gridContainer,children:[l&&Object(j.jsx)("paper",{className:o.paper,children:Object(j.jsxs)(f.a,{item:!0,xs:12,md:6,children:[Object(j.jsx)(O.a,{variant:"h5",gutterBottom:!0,children:t||"Name"}),Object(j.jsx)("video",{playsInline:!0,muted:!0,ref:c,autoplay:!0,className:o.video})]})}),a&&!i&&Object(j.jsx)(g.a,{className:o.paper,children:Object(j.jsxs)(f.a,{item:!0,xs:12,md:6,children:[Object(j.jsx)(O.a,{variant:"h5",gutterBottom:!0,children:s.name||"Name"}),Object(j.jsx)("video",{playsInline:!0,muted:!0,ref:r,autoplay:!0,className:o.video})]})})]})},w=a(175),y=a(180),N=a(181),k=a(83),S=a(176),I=a(177),D=a(178),B=Object(h.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(p.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),Container:Object(p.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{padding:"10px 20px",border:"2px solid black"}}})),A=function(e){var t=e.children,a=Object(n.useContext)(u),c=a.me,r=a.callAccepted,i=a.name,s=a.setName,o=a.leaveCall,d=a.callUser,b=a.callEnded,m=Object(n.useState)(""),p=Object(l.a)(m,2),x=p[0],h=p[1],v=B();return Object(j.jsx)(w.a,{className:"classes.container",children:Object(j.jsxs)(g.a,{elevation:10,className:v.paper,children:[Object(j.jsx)("form",{className:v.root,noValidate:!0,autoComplete:"off",children:Object(j.jsxs)(f.a,{container:!0,className:v.gridContainer,children:[Object(j.jsxs)(f.a,{item:!0,xs:12,md:6,className:v.padding,children:[Object(j.jsx)(O.a,{gutterBottom:!0,variant:"h6",children:"Account info"}),Object(j.jsx)(y.a,{label:"Name",value:i,onChange:function(e){return s(e.target.value)},fullWidth:!0}),Object(j.jsx)(k.CopyToClipboard,{text:c,className:v.margin,children:Object(j.jsx)(N.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:Object(j.jsx)(S.a,{fontSize:"large"}),children:"Copy Your ID"})})]}),Object(j.jsxs)(f.a,{item:!0,xs:12,md:6,className:v.padding,children:[Object(j.jsx)(O.a,{gutterBottom:!0,variant:"h6",children:"Make a Call"}),Object(j.jsx)(y.a,{label:"ID to Call",value:x,onChange:function(e){return h(e.target.value)},fullWidth:!0}),r&&!b?Object(j.jsx)(N.a,{variant:"contained",color:"secondary",startIcon:Object(j.jsx)(I.a,{fontSize:"large",fullWidth:!0,onClick:o,className:v.margin}),children:"Hang Up"}):Object(j.jsx)(N.a,{variant:"contained",color:"primary",startIcon:Object(j.jsx)(D.a,{fontSize:"large",fullWidth:!0,onClick:function(){return d(x)},className:v.margin}),children:"Call"})]})]})}),t]})})},E=function(){var e=Object(n.useContext)(u),t=e.answerCall,a=e.callAccepted,c=e.call;return Object(j.jsx)(j.Fragment,{children:c&&!a&&Object(j.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(j.jsxs)("h1",{children:[c.name," is calling: "]}),Object(j.jsx)(N.a,{variant:"contained",color:"primary",onClick:t,children:"Answer"})]})})},R=Object(h.a)((function(e){return{appBar:Object(p.a)({borderRadius:15,margin:"30px 100px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"600px",border:"2px solid white"},e.breakpoints.down("xs"),{width:"90%"}),wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}})),W=function(){var e=R();return Object(j.jsxs)("div",{className:e.wrapper,children:[Object(j.jsx)(x.a,{position:"static",color:"inherit",className:e.appBar,children:Object(j.jsx)(O.a,{variant:"h2",align:"center",children:"live video chat"})}),Object(j.jsx)(C,{}),Object(j.jsx)(A,{children:Object(j.jsx)(E,{})})]})};i.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(m,{children:Object(j.jsx)(W,{})})}),document.getElementById("root"))},96:function(e,t,a){}},[[139,1,2]]]);
//# sourceMappingURL=main.a48b64b7.chunk.js.map